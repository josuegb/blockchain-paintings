"use strict";
// tslint:disable:no-invalid-this
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
require("reflect-metadata");
var validateMetadataKey = Symbol('validate');
function Validate(schema) {
    return function (target, key) {
        var getSet = {
            get: function () {
                return this["_" + key];
            },
            set: function (newVal) {
                var setter = target.__lookupSetter__(key);
                setter = !setter || setter === getSet.set ? (function (v) { return v; }) : setter;
                this["_" + key] = schema.validateSync(setter.call(this, newVal));
            },
            enumerable: true,
            configurable: true
        };
        Object.defineProperty(target, key, getSet);
        var validated = Reflect.getMetadata(validateMetadataKey, target);
        Reflect.defineMetadata(validateMetadataKey, tslib_1.__assign({}, validated, (_a = {}, _a[key] = true, _a)), target);
        var _a;
    };
}
exports.Validate = Validate;
function getValidatedProperties(obj) {
    var validated = {};
    try {
        validated = Reflect.getMetadata(validateMetadataKey, obj) || {};
    }
    catch (e) {
        // empty
    }
    return Object.keys(validated);
}
exports.getValidatedProperties = getValidatedProperties;
//# sourceMappingURL=validate.decorator.js.map